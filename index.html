<html lang="ar" dir="rtl" style="overflow-x: hidden;">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุฅูุฌุงุฒ | Eejaz AI</title>

    <!-- Google Fonts: Outfit for English, Cairo for Arabic -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- Fonts -->
    <link
        href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&family=Outfit:wght@300;400;600;800&family=Reem+Kufi:wght@400;700&display=swap"
        rel="stylesheet">

    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#8b5cf6">

    <!-- Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js"></script>
    <script>
        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
    </script>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        // Mute Tailwind & CDN logs
        (function () {
            const originalLog = console.log;
            const originalWarn = console.warn;
            console.log = function () {
                if (arguments[0] && typeof arguments[0] === 'string' && (arguments[0].includes('tailwindcss') || arguments[0].includes('cdn.tailwindcss.com'))) return;
                originalLog.apply(console, arguments);
            };
            console.warn = function () {
                if (arguments[0] && typeof arguments[0] === 'string' && (arguments[0].includes('tailwindcss') || arguments[0].includes('cdn.tailwindcss.com'))) return;
                originalWarn.apply(console, arguments);
            };
        })();
    </script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        glass: "rgba(255, 255, 255, 0.05)",
                        glassBorder: "rgba(255, 255, 255, 0.1)",
                        primary: "#8B5CF6", // Purple-500
                        secondary: "#EC4899", // Pink-500
                    },
                    fontFamily: {
                        sans: ['Cairo', 'sans-serif'],
                        english: ['Outfit', 'sans-serif'],
                        logo: ['Reem Kufi', 'serif'],
                    },
                    animation: {
                        'blob': 'blob 7s infinite',
                    },
                    keyframes: {
                        blob: {
                            '0%': { transform: 'translate(0px, 0px) scale(1)' },
                            '33%': { transform: 'translate(30px, -50px) scale(1.1)' },
                            '66%': { transform: 'translate(-20px, 20px) scale(0.9)' },
                            '100%': { transform: 'translate(0px, 0px) scale(1)' },
                        }
                    }
                }
            }
        }
    </script>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="style.css">
    <style>
        #print-area {
            display: none;
        }

        /* Print Styles for Text-Based PDF */
        @media print {
            @page {
                margin: 0;
            }

            body>* {
                display: none !important;
            }

            #print-area {
                display: block !important;
                position: relative;
                width: 100%;
                color: black !important;
                background: white !important;
                padding: 20mm 15mm;
                margin: 0;
                direction: rtl;
                font-family: 'Cairo', sans-serif;
            }

            .text-gray-400 {
                color: #333 !important;
            }

            .bg-gray-800,
            .bg-gray-900 {
                background: transparent !important;
            }

            button {
                display: none !important;
            }
        }
    </style>
</head>

<body dir="rtl"
    class="bg-gray-900 text-white min-h-screen w-full overflow-x-hidden relative selection:bg-pink-500 selection:text-white font-sans">

    <!-- Background Animation Blobs -->
    <div class="fixed inset-0 z-0 pointer-events-none overflow-hidden">
        <div
            class="absolute top-0 left-1/4 w-96 h-96 bg-purple-600 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob">
        </div>
        <div
            class="absolute top-0 right-1/4 w-96 h-96 bg-pink-600 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob animation-delay-2000">
        </div>
        <div
            class="absolute -bottom-32 left-1/3 w-96 h-96 bg-blue-600 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob animation-delay-4000">
        </div>
    </div>

    <!-- Main Container -->
    <main class="relative z-10 min-h-screen w-full flex items-center justify-center p-4">

        <!-- STAGE 1: Professional Loading -->
        <div id="intro-loading" class="intro-screen z-[100]">
            <div class="intro-loader-container">
                <svg class="intro-progress-ring" width="220" height="220">
                    <defs>
                        <linearGradient id="loader-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                            <stop offset="0%" stop-color="#8b5cf6" />
                            <stop offset="100%" stop-color="#ec4899" />
                        </linearGradient>
                    </defs>
                    <circle class="intro-progress-bg" cx="110" cy="110" r="100"></circle>
                    <circle id="intro-ring-fill" class="intro-progress-fill" cx="110" cy="110" r="100"
                        stroke-dasharray="628.3" stroke-dashoffset="628.3"></circle>
                </svg>
                <div class="intro-percentage"><span id="intro-percent-val">0</span>%</div>
            </div>

            <div class="static-keywords">
                <span class="keyword-tag">ุงุฎุชุฑ ูููู</span>
                <span class="keyword-tag">ุฌูุฒ ููุชุงุญู AI</span>
                <span class="keyword-tag">ุฃูุช ูุญูู</span>
                <span class="keyword-tag">ุฌูุฒ ูุชุงุจู PDF</span>
                <span class="keyword-tag">ุทุฑููู ูููุฌุงุญ</span>
            </div>

            <div class="mt-8 text-purple-400 text-[10px] font-mono tracking-[0.3em] animate-pulse">SYSTEM CORE
                INITIALIZING...</div>
        </div>
        </div>

        <!-- INTRO SCREEN 2: Welcome (Click to Start) -->
        <div id="intro-welcome" class="intro-screen z-[50] hidden cursor-pointer">
            <div class="intro-content">
                <div class="mb-2">
                    <span
                        class="font-logo text-6xl md:text-8xl bg-clip-text text-transparent bg-gradient-to-r from-purple-400 via-pink-500 to-yellow-500 font-bold block mb-2">ุฅูุฌุงุฒ</span>
                    <span
                        class="font-english text-3xl md:text-4xl text-white/40 tracking-[0.3em] font-light block mb-8 uppercase">Eejaz</span>
                </div>
                <h1 class="text-3xl md:text-4xl font-bold text-white mb-6 leading-tight">
                    ุฐูุงุกู ูููุฎุต.. ูุฅุจุฏุงุนู ููุฌุฒ
                </h1>
                <p class="text-gray-400 text-xl mb-12">ุงุถุบุท ูู ุฃู ููุงู ูุจุฏุก ุงูุชุฌุฑุจุฉ</p>
                <div
                    class="w-16 h-16 border-2 border-white/20 rounded-full flex items-center justify-center mx-auto animate-bounce">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-white" fill="none" viewBox="0 0 24 24"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M19 14l-7 7m0 0l-7-7m7 7V3" />
                    </svg>
                </div>
            </div>
            <!-- Full screen click trigger -->
            <div class="absolute inset-0 z-10" onclick="nextIntroStep('intro-quality')"></div>
        </div>

        <!-- INTRO SCREEN 2.5: Quality Standards (New) -->
        <div id="intro-quality" class="intro-screen z-[45] hidden">
            <div
                class="intro-content glass-card rounded-3xl border border-white/10 shadow-2xl shadow-yellow-900/40 p-10">
                <div
                    class="w-20 h-20 bg-gradient-to-br from-yellow-400 to-orange-600 rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg -rotate-6">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 text-white" fill="none" viewBox="0 0 24 24"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04M12 21.482a11.955 11.955 0 01-8.618-3.04A11.955 11.955 0 013 12c0-2.391.704-4.617 1.918-6.482M12 21.482a11.955 11.955 0 008.618-3.04A11.955 11.955 0 0021 12c0-2.391-.704-4.617-1.918-6.482M12 21.482V2.944" />
                    </svg>
                </div>
                <h2 class="text-3xl font-bold text-white mb-4 italic">ุถูุงู ุฃุนูู ุฌูุฏุฉ</h2>
                <p class="text-purple-400 text-sm mb-6 uppercase tracking-widest font-bold">ููู ุฌุฏุงู ูุถูุงู ุฏูุฉ ุงููุชุงุฆุฌ
                </p>
                <div class="text-right space-y-4 mb-8 text-gray-300">
                    <div class="flex items-start gap-3">
                        <span class="text-yellow-500 mt-1">โฆ</span>
                        <p>ุชุฃูุฏ ูู <strong>ูุถูุญ ุงููุตูุต</strong> ูู ูููุงุช ุงูู PDF (ุฎุงุตุฉ ุงูููุณูุญุฉ ุถูุฆูุงู).</p>
                    </div>
                    <div class="flex items-start gap-3">
                        <span class="text-yellow-500 mt-1">โฆ</span>
                        <p>ููุถู ุฑูุน <strong>ูุตู ูุงุญุฏ ุฃู ูุญุฏุฉ ูุญุฏุฏุฉ</strong> ููุญุตูู ุนูู ุชุญููู ุฃุนูู.</p>
                    </div>
                    <div class="flex items-start gap-3">
                        <span class="text-yellow-500 mt-1">โฆ</span>
                        <p>ุงููุธุงู ูุฎุตุต ูููุตูุต <strong>ุงููุทุจูุนุฉ</strong>ุ ุงููุชุงุจุฉ ุงููุฏููุฉ ูุฏ ูุง ุชููุฑุฃ ุจุฏูุฉ.</p>
                    </div>
                    <div class="flex items-start gap-3">
                        <span class="text-yellow-500 mt-1">โฆ</span>
                        <p>ุชุฃูุฏ ูู <strong>ุงุฎุชูุงุฑ ูุบุฉ ุงูููู</strong> ุงูุตุญูุญุฉ ูู ุงูุฅุนุฏุงุฏุงุช ูุจู ุงูุจุฏุก.</p>
                    </div>
                </div>
                <button onclick="nextIntroStep('intro-how-it-works')"
                    class="bg-gradient-to-r from-yellow-500 to-orange-600 text-white px-10 py-3 rounded-full font-bold text-lg hover:from-yellow-600 hover:to-orange-700 transition-all shadow-lg shadow-yellow-500/20 transform hover:-translate-y-1">
                    ุฃุนุฏู ุจุฐููุ ููุจุฏุฃ!
                </button>
            </div>
        </div>

        <!-- INTRO SCREEN 3: How It Works -->
        <div id="intro-how-it-works" class="intro-screen z-[40] hidden">
            <div class="intro-content glass-card rounded-3xl border border-white/10 shadow-2xl shadow-purple-900/50">
                <div
                    class="w-20 h-20 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg rotate-3 hover:rotate-6 transition-transform">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 text-white" fill="none" viewBox="0 0 24 24"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" />
                    </svg>
                </div>
                <h2 class="text-3xl font-bold text-white mb-4">ุทุฑููุฉ ุงูุนูู</h2>
                <p class="text-gray-300 text-lg mb-8 leading-relaxed">
                    ูููู ุจุชุญููู ูููุงุชู ุจุงุณุชุฎุฏุงู ุฃุญุฏุซ ุชูููุงุช ุงูุฐูุงุก ุงูุงุตุทูุงุนู ูุงุณุชุฎุฑุงุฌ ุงูููุฎุตุงุช ูุงูุฃุณุฆูุฉ ุงููููุฉ ูู ุซูุงูู
                    ูุนุฏูุฏุฉ.
                </p>
                <button onclick="nextIntroStep('intro-privacy')"
                    class="bg-white text-gray-900 px-10 py-3 rounded-full font-bold text-lg hover:bg-gray-200 transition-colors shadow-lg hover:shadow-white/20 transform hover:-translate-y-1">
                    ูููุช
                </button>
            </div>
        </div>

        <!-- INTRO SCREEN 4: Privacy Data -->
        <div id="intro-privacy" class="intro-screen z-[30] hidden">
            <div class="intro-content glass-card rounded-3xl border border-white/10 shadow-2xl shadow-blue-900/50 p-10">
                <div
                    class="w-20 h-20 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg rotate-3">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 text-white" fill="none" viewBox="0 0 24 24"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04M12 21.482a11.955 11.955 0 01-8.618-3.04A11.955 11.955 0 013 12c0-2.391.704-4.617 1.918-6.482M12 21.482a11.955 11.955 0 008.618-3.04A11.955 11.955 0 0021 12c0-2.391-.704-4.617-1.918-6.482M12 21.482V2.944" />
                    </svg>
                </div>
                <h2 class="text-3xl font-bold text-white mb-4">ุฃููู ูุฎุตูุตูุชู ุฃููุงู</h2>
                <div class="text-gray-300 text-lg mb-8 leading-relaxed space-y-4 text-center">
                    <p>
                        ูุญู ููุฎุฑ ุจุชุทุจูู ูุธุงู <strong>"ุงูุชูุงุตู ุงููุจุงุดุฑ"</strong>ุ ุญูุซ ููุชูู ููุชุงุญู ูู ูุชุตูุญู ุฅูู ุฎูุงุฏู
                        ุฌูุฌู ูุจุงุดุฑุฉ ุฏูู ูุฑูุฑ ุจุฃู ุฎูุงุฏู ูุณูุทุฉ.
                    </p>
                    <div class="bg-blue-500/10 border border-blue-500/20 p-4 rounded-2xl text-sm">
                        <span class="text-blue-400 font-bold block mb-1">๐ก๏ธ ุชูููุฉ ุงูุญูุงูุฉ:</span>
                        ูุชู ุชุดููุฑ ููุชุงุญู ูุญููุงู ุจุงุณุชุฎุฏุงู ุชูููุงุช ุงููุชุตูุญ ุงูุญุฏูุซุฉุ ููุง ูููู ูุฃุญุฏ (ุญุชู ูุญู ูุทูุฑู ุงููุธุงู)
                        ุงููุตูู ุฅููู ุฃุจุฏุงู.
                    </div>
                </div>
                <button onclick="nextIntroStep('intro-policy')"
                    class="bg-gradient-to-r from-blue-500 to-indigo-600 text-white px-10 py-3 rounded-full font-bold text-lg hover:from-blue-600 hover:to-indigo-700 transition-all shadow-lg shadow-blue-500/30 transform hover:-translate-y-1">
                    ูููุชุ ุฃูุง ูุทูุฆู
                </button>
            </div>
        </div>

        <!-- INTRO SCREEN 5: Policy -->
        <div id="intro-policy" class="intro-screen z-[20] hidden">
            <div class="intro-content glass-card rounded-3xl border border-white/10 shadow-2xl shadow-purple-900/50">
                <div
                    class="w-20 h-20 bg-gradient-to-br from-green-400 to-emerald-600 rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-lg rotate-3 hover:rotate-0 transition-transform">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 text-white" fill="none" viewBox="0 0 24 24"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                </div>
                <h2 class="text-3xl font-bold text-white mb-4">ุณูุงุณุฉ ุงูุชุทุจูู</h2>
                <p class="text-gray-300 text-lg mb-8 leading-relaxed">
                    ุจุงุณุชุฎุฏุงูู ููุฐุง ุงูุชุทุจููุ ูุฅูู ุชูุงูู ุนูู ุดุฑูุท ุงูุงุณุชุฎุฏุงู ูุณูุงุณุฉ ุงูุงุณุชุฎุฏุงู ุงูุนุงุฏู ููููุงุฑุฏ.
                </p>
                <button onclick="finishIntro()"
                    class="bg-gradient-to-r from-green-500 to-emerald-600 text-white px-10 py-3 rounded-full font-bold text-lg hover:from-green-600 hover:to-emerald-700 transition-all shadow-lg shadow-green-500/30 transform hover:-translate-y-1 flex items-center gap-2 mx-auto">
                    <span>ููุงูู ููุจุฏุฃ ุงูุนูู</span>
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M13 7l5 5m0 0l-5 5m5-5H6" />
                    </svg>
                </button>
            </div>
        </div>

        <!-- Main App (Hidden Initially) -->
        <div class="glass-container w-full max-w-4xl p-8 md:p-12 mx-auto relative overflow-hidden transition-all duration-1000 ease-in-out opacity-0 transform translate-y-20 scale-95"
            id="main-card">

            <!-- Header -->
            <header class="text-center mb-10">
                <div class="flex flex-col items-center justify-center gap-1 mb-2">
                    <h1
                        class="font-logo text-4xl md:text-5xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-purple-400 to-pink-400">
                        ุฅูุฌุงุฒ</h1>
                    <span class="font-english text-xs text-white/30 tracking-[0.5em] uppercase">Eejaz AI</span>
                </div>
                <p class="text-gray-400 text-lg">ุญูู ูููุงุชู ุฅูู ููุฎุตุงุช ูุฃุณุฆูุฉ ุฐููุฉ ูู ุซูุงูู</p>
            </header>

            <!-- Step 1: Upload Zone -->
            <section id="step-upload" class="transition-opacity duration-500">
                <div id="drop-zone"
                    class="border-2 border-dashed border-gray-600 rounded-3xl p-10 text-center cursor-pointer transition-all duration-300 hover:border-purple-500 hover:bg-white/5 group relative">
                    <input type="file" id="file-input" class="hidden" accept=".pdf,.docx,.txt">

                    <div class="pointer-events-none">
                        <div
                            class="w-20 h-20 bg-gray-800 rounded-full flex items-center justify-center mx-auto mb-6 group-hover:scale-110 transition-transform duration-300 shadow-lg shadow-purple-500/20">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 text-purple-400" fill="none"
                                viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
                            </svg>
                        </div>
                        <h3 class="text-xl font-semibold mb-2 text-gray-200">ุงุณุญุจ ุงูููู ููุง ุฃู ุงุถุบุท ููุฑูุน</h3>
                        <p class="text-sm text-gray-500">ูุฏุนู PDF, DOCX, TXT</p>
                    </div>
                </div>
            </section>

            <!-- Step 2: Options Panel (Hidden initially) -->
            <section id="step-options" class="hidden transition-all duration-500">
                <div class="bg-gray-800/50 rounded-2xl p-6 border border-white/5 backdrop-blur-sm">
                    <div class="flex items-center justify-between mb-6">
                        <h2 class="text-xl font-bold text-white flex items-center gap-2">
                            <span class="w-2 h-8 bg-pink-500 rounded-full"></span>
                            ุฅุนุฏุงุฏุงุช ุงูุชุญููู
                        </h2>
                        <button id="btn-back-upload"
                            class="text-sm text-gray-400 hover:text-white transition-colors">ุชุบููุฑ ุงูููู</button>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- Language -->
                        <div>
                            <label class="block text-sm font-medium text-gray-400 mb-2">ูุบุฉ ุงูุชูุฎูุต</label>
                            <select id="opt-language"
                                class="w-full bg-gray-900 border border-gray-700 rounded-xl px-4 py-3 text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent outline-none transition-all">
                                <option value="ar">ุงูุนุฑุจูุฉ</option>
                                <option value="en">English</option>
                            </select>
                        </div>

                        <!-- Question Type (New Checkboxes) -->
                        <div>
                            <label class="block text-sm font-medium text-gray-400 mb-2">ุฃููุงุน ุงูุฃุณุฆูุฉ (ุชูุฒูุน
                                ุฐูู)</label>
                            <div class="grid grid-cols-2 gap-3">
                                <label
                                    class="flex items-center gap-2 bg-gray-900 rounded-lg p-3 cursor-pointer hover:bg-gray-800 transition-colors border border-gray-700">
                                    <input type="checkbox" name="qType" value="mcq" checked
                                        class="w-4 h-4 text-purple-600 bg-gray-700 border-gray-600 rounded focus:ring-purple-500">
                                    <span class="text-sm">ุฎูุงุฑุงุช (MCQ)</span>
                                </label>
                                <label
                                    class="flex items-center gap-2 bg-gray-900 rounded-lg p-3 cursor-pointer hover:bg-gray-800 transition-colors border border-gray-700">
                                    <input type="checkbox" name="qType" value="tf" checked
                                        class="w-4 h-4 text-purple-600 bg-gray-700 border-gray-600 rounded focus:ring-purple-500">
                                    <span class="text-sm">ุตุญ/ุฎุทุฃ</span>
                                </label>
                                <label
                                    class="flex items-center gap-2 bg-gray-900 rounded-lg p-3 cursor-pointer hover:bg-gray-800 transition-colors border border-gray-700">
                                    <input type="checkbox" name="qType" value="fill"
                                        class="w-4 h-4 text-purple-600 bg-gray-700 border-gray-600 rounded focus:ring-purple-500">
                                    <span class="text-sm">ุฃููู ุงููุฑุงุบ</span>
                                </label>
                                <label
                                    class="flex items-center gap-2 bg-gray-900 rounded-lg p-3 cursor-pointer hover:bg-gray-800 transition-colors border border-gray-700">
                                    <input type="checkbox" name="qType" value="reasoning"
                                        class="w-4 h-4 text-purple-600 bg-gray-700 border-gray-600 rounded focus:ring-purple-500">
                                    <span class="text-sm">ุนูู/ููุงุฐุง</span>
                                </label>
                            </div>
                        </div>

                        <!-- Question Count -->
                        <div class="md:col-span-2">
                            <label class="block text-sm font-medium text-gray-400 mb-2">ุนุฏุฏ ุงูุฃุณุฆูุฉ: <span
                                    id="q-count-display" class="text-purple-400 font-bold">10</span></label>
                            <input type="range" id="opt-count" min="1" max="20" value="10"
                                class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-purple-500">
                        </div>

                        <!-- Smart Distribution Toggle (NEW) -->
                        <div class="md:col-span-2">
                            <label class="flex items-center gap-3 cursor-pointer group">
                                <div class="relative">
                                    <input type="checkbox" id="opt-smart-distribution" checked class="sr-only peer">
                                    <div
                                        class="w-11 h-6 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-gradient-to-r peer-checked:from-green-500 peer-checked:to-emerald-500">
                                    </div>
                                </div>
                                <div>
                                    <span
                                        class="text-sm font-medium text-gray-300 group-hover:text-green-400 transition-colors">
                                        ๐ฏ ุชูุฒูุน ุฐูู ููุฃุณุฆูุฉ (ููุตู ุจู)
                                    </span>
                                    <p class="text-xs text-gray-500">ูุชู ุงุฎุชูุงุฑ ุงูุฃุณุฆูุฉ ูู ูุงูู ุงููุญุชูู ุงูุชุนูููู
                                        ุจุงูุชุณุงูู</p>
                                </div>
                            </label>
                        </div>
                    </div>

                    <div class="mt-8">
                        <button id="btn-process"
                            class="w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 text-white font-bold py-4 rounded-xl shadow-lg shadow-purple-500/30 transform hover:-translate-y-1 transition-all duration-300 flex items-center justify-center gap-2">
                            <span>ุจุฏุก ุงููุนุงูุฌุฉ</span>
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
                                stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M13 10V3L4 14h7v7l9-11h-7z" />
                            </svg>
                        </button>
                    </div>
                </div>
            </section>

            <!-- Step 3: Progress (Hidden initially) -->
            <section id="step-processing" class="hidden py-10 text-center">
                <div class="relative w-40 h-40 mx-auto mb-8">
                    <svg class="w-full h-full" viewBox="0 0 100 100">
                        <circle class="text-gray-700 stroke-current" stroke-width="8" cx="50" cy="50" r="40"
                            fill="transparent"></circle>
                        <circle id="progress-ring"
                            class="text-pink-500 progress-ring__circle stroke-current transform -rotate-90 origin-center transition-all duration-300"
                            stroke-width="8" stroke-linecap="round" cx="50" cy="50" r="40" fill="transparent"
                            stroke-dasharray="251.2" stroke-dashoffset="251.2"></circle>
                    </svg>
                    <div class="absolute top-0 left-0 w-full h-full flex items-center justify-center">
                        <span id="progress-text" class="text-2xl font-bold text-white">0%</span>
                    </div>
                </div>
                <h3 id="progress-status" class="text-xl text-gray-300 animate-pulse">ุฌุงุฑู ุชุญููู ุงูููู...</h3>
            </section>

            <!-- Step 4: Results (Hidden initially) -->
            <section id="step-results" class="hidden space-y-8 animate-fade-in-up">

                <!-- Summary Card -->
                <div class="glass-card p-6 rounded-2xl relative overflow-hidden group">
                    <div class="absolute top-0 left-0 w-1 h-full bg-gradient-to-b from-purple-500 to-pink-500"></div>
                    <h3 class="text-2xl font-bold text-white mb-4">ุงูููุฎุต</h3>
                    <p id="result-summary" class="text-gray-300 leading-relaxed text-lg">
                        <!-- Summary content will be injected here -->
                    </p>
                    <div
                        class="absolute -right-10 -bottom-10 w-32 h-32 bg-purple-500/10 rounded-full blur-2xl group-hover:bg-purple-500/20 transition-all">
                    </div>
                </div>

                <!-- Ad Placeholder 1 -->
                <div
                    class="w-full aspect-[21/9] md:aspect-[32/5] bg-gray-800/80 rounded-xl border border-gray-700 flex flex-col items-center justify-center text-gray-500 overflow-hidden relative">
                    <span class="text-xs uppercase tracking-widest mb-1">Advertisement</span>
                    <!-- Google Ad Placeholder -->
                    <div class="w-full h-full bg-stripes opacity-10 absolute inset-0"></div>
                    <p class="font-bold">ูุณุงุญุฉ ุฅุนูุงููุฉ ูููุฒุฉ</p>
                </div>

                <!-- Questions Section -->
                <div id="questions-container" class="space-y-4">
                    <h3 class="text-2xl font-bold text-white mb-4 flex items-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-yellow-400" fill="none"
                            viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                        ุงูุฃุณุฆูุฉ ุงูููุชุฑุญุฉ
                    </h3>
                    <!-- Questions will be injected here -->
                </div>

                <!-- PDF Options -->
                <div class="flex items-center justify-center gap-6 py-4 border-t border-white/5 no-print">
                    <label class="flex items-center gap-3 cursor-pointer group">
                        <div class="relative">
                            <input type="checkbox" id="chk-include-summary" checked class="sr-only peer">
                            <div
                                class="w-11 h-6 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-purple-600">
                            </div>
                        </div>
                        <span
                            class="text-sm font-medium text-gray-300 group-hover:text-purple-400 transition-colors">ุชูุฒูู
                            ูุน ุงูููุฎุต</span>
                    </label>
                </div>

                <div class="flex flex-col md:flex-row gap-4 justify-center pt-4">
                    <button id="btn-download-no-answers" type="button"
                        class="bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-xl shadow-lg transform hover:-translate-y-1 transition-all duration-300 flex items-center justify-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                        </svg>
                        <span>ุชูุฒูู (ุจุฏูู ุฅุฌุงุจุงุช)</span>
                    </button>

                    <button id="btn-download-with-answers" type="button"
                        class="bg-emerald-600 hover:bg-emerald-700 text-white px-6 py-3 rounded-xl shadow-lg transform hover:-translate-y-1 transition-all duration-300 flex items-center justify-center gap-2">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                        <span>ุชูุฒูู (ูุน ุงูุฅุฌุงุจุงุช)</span>
                    </button>

                    <button id="btn-print-exam" type="button"
                        class="bg-gradient-to-r from-yellow-400 via-yellow-500 to-yellow-600 hover:from-yellow-300 hover:to-yellow-500 text-gray-900 px-6 py-3 rounded-xl shadow-lg shadow-yellow-500/20 transform hover:-translate-y-1 transition-all duration-300 flex items-center justify-center gap-2 font-bold ring-2 ring-yellow-400/50">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24"
                            stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z" />
                        </svg>
                        <span>ุทุจุงุนุฉ ุงูุชุญุงู ุฑุณูู</span>
                    </button>
                </div>

                <!-- Ad Placeholder 2 -->
                <div
                    class="w-full h-24 bg-gray-800/80 rounded-xl border border-gray-700 flex flex-col items-center justify-center text-gray-500 mt-8">
                    <span class="text-xs uppercase tracking-widest">Advertisement</span>
                    <p>ุฅุนูุงู ุณููู</p>
                </div>

                <div class="flex items-center justify-center gap-4 pt-8 no-print">
                    <button id="btn-install-app"
                        class="bg-gradient-to-r from-purple-600 to-pink-600 text-white px-8 py-3 rounded-full shadow-lg shadow-purple-500/20 hover:scale-105 active:scale-95 transition-all flex items-center gap-2 font-bold">
                        <img src="icon.png" class="w-6 h-6 rounded-lg pointer-events-none" alt="EEJAZ">
                        <span>ุชูุฒูู "ุฅูุฌุงุฒ" ููุฌูุงุฒ</span>
                    </button>

                    <button onclick="location.reload()"
                        class="bg-gray-700 hover:bg-gray-600 text-white px-8 py-3 rounded-full transition-all">
                        ุจุฏุก ุฌุฏูุฏ
                    </button>
                </div>

            </section>

        </div>
    </main>

    </div>
    </div>

    <!-- STAGE 4: AI Key Setup (Full Screen Stage) -->
    <div id="intro-api" class="intro-screen hidden">
        <div class="glass-card max-w-md w-full p-8 rounded-3xl border border-white/10 shadow-2xl text-center">
            <div class="w-20 h-20 bg-purple-600/20 rounded-2xl flex items-center justify-center mx-auto mb-6 rotate-12">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 text-purple-400" fill="none"
                    viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M12 15v2m0 0v2m0-2h2m-2 0H10m11-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
            </div>
            <h2 class="text-3xl font-bold text-white mb-2 font-logo">ุชูุดูุท ุงูุฅููุงูุงุช</h2>
            <p class="text-gray-400 mb-8 text-sm leading-relaxed">ุฃุฏุฎู ููุชุงุญ Gemini ุงูุฎุงุต ุจู ูุชูุนูู ููุฉ ุงูุฐูุงุก ุงูุงุตุทูุงุนู
                ูู ุชุญููู ูููุงุชู.
                <br><span class="text-purple-500/80 mt-2 block font-medium">ุจูุงูุงุชู ูุญููุฉ ููุดูุฑุฉ ูู ูุชุตูุญู.</span>
            </p>

            <input type="password" id="api-key-input" placeholder="ุฃุฏุฎู ููุชุงุญ Gemini ููุง..."
                class="w-full bg-gray-800/80 border border-gray-700 rounded-2xl px-4 py-4 text-white focus:ring-2 focus:ring-purple-500 outline-none transition-all mb-4 text-center text-lg">

            <a href="https://aistudio.google.com/app/apikey" target="_blank"
                class="text-sm text-purple-400 hover:text-purple-300 underline mb-8 block transition-colors">ุงูุญุตูู ุนูู
                ููุชุงุญ ูุฌุงูู ุฌุฏูุฏ</a>

            <button id="btn-save-key"
                class="w-full bg-gradient-to-r from-purple-600 to-indigo-600 text-white py-4 rounded-2xl font-bold shadow-xl shadow-purple-500/20 active:scale-95 transition-all text-lg mb-4">ุจุฏุก
                ุงูุงุณุชุฎุฏุงู ุงูุขู</button>

            <p class="text-[10px] text-gray-500 uppercase tracking-widest">Secured by AES-256 Protocol</p>
        </div>
    </div>

    <!-- Exam Setup Modal -->
    <div id="exam-modal"
        class="fixed inset-0 z-[100] hidden flex items-center justify-center p-4 bg-gray-900/90 backdrop-blur-md">
        <div
            class="glass-card max-w-lg w-full p-8 rounded-3xl border border-white/10 shadow-2xl animate-fade-in-up mx-auto">
            <h2 class="text-2xl font-bold mb-6 text-white border-b border-purple-500/30 pb-4">ุฅุนุฏุงุฏุงุช ุงูุงูุชุญุงู
                ุงูุฑุณูู
            </h2>

            <div class="space-y-4">
                <div>
                    <label class="block text-sm text-gray-400 mb-2">ุดุนุงุฑ ุงููุคุณุณุฉ</label>
                    <input type="file" id="exam-logo" accept="image/*"
                        class="w-full bg-gray-800 rounded-xl px-4 py-2 border border-gray-700 text-sm">
                </div>
                <div>
                    <label class="block text-sm text-gray-400 mb-2">ุงุณู ุงููุงุฏุฉ / ุนููุงู ุงูุงูุชุญุงู</label>
                    <input type="text" id="exam-subject-name" placeholder="ูุซุงู: ุงููุบุฉ ุงูุนุฑุจูุฉ / ุฑูุงุถูุงุช"
                        class="w-full bg-gray-800 rounded-xl px-4 py-3 border border-gray-700 outline-none focus:ring-2 focus:ring-purple-500 mb-4">
                </div>
                <div>
                    <label class="block text-sm text-gray-400 mb-2">ุงุณู ุงููุคุณุณุฉ (ุงููุฏุฑุณุฉ/ุงูุฃูุงุฏูููุฉ)</label>
                    <input type="text" id="exam-inst-name" placeholder="ุฃุฏุฎู ุงุณู ุงููุคุณุณุฉ"
                        class="w-full bg-gray-800 rounded-xl px-4 py-3 border border-gray-700 outline-none focus:ring-2 focus:ring-purple-500">
                </div>
                <div class="grid grid-cols-2 gap-4">
                    <div>
                        <label class="block text-sm text-gray-400 mb-2">ุงุณู ุงูุฃุณุชุงุฐ / ุงููุนูู</label>
                        <input type="text" id="exam-teacher-name" placeholder="ุฃุฏุฎู ุงุณู ุงูุฃุณุชุงุฐ"
                            class="w-full bg-gray-800 rounded-xl px-4 py-3 border border-gray-700 outline-none focus:ring-2 focus:ring-purple-500">
                    </div>
                    <div>
                        <label class="block text-sm text-gray-400 mb-2">ุฏุฑุฌุฉ ุงูุงูุชุญุงู ุงููููุฉ</label>
                        <input type="number" id="exam-total-mark" placeholder="ูุซุงู: 60"
                            class="w-full bg-gray-800 rounded-xl px-4 py-3 border border-gray-700 outline-none focus:ring-2 focus:ring-purple-500 text-center font-bold text-yellow-500">
                    </div>
                </div>
                <div>
                    <label class="block text-sm text-gray-400 mb-2">ููุงุญุธุฉ ุฃุณูู ุงููุฑูุฉ</label>
                    <textarea id="exam-note" rows="2" placeholder='ูุซุงู: "ุนูุฏ ุงุฎุชูุงุฑ ุงุฌุงุจุชูู ูุตุจุญ ุงูุณูุงู ูุดุทูู"'
                        class="w-full bg-gray-800 rounded-xl px-4 py-3 border border-gray-700 outline-none focus:ring-2 focus:ring-purple-500 text-sm"></textarea>
                </div>
            </div>

            <div class="flex gap-4 mt-8">
                <button id="btn-confirm-exam"
                    class="flex-1 bg-gradient-to-r from-purple-600 to-pink-600 py-3 rounded-xl font-bold shadow-lg shadow-purple-500/20 active:scale-95 transition-all">ุชูููุฏ
                    ุงูุงูุชุญุงู</button>
                <button id="btn-close-exam"
                    class="px-6 py-3 rounded-xl bg-gray-700 hover:bg-gray-600 transition-colors">ุฅูุบุงุก</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="app.js"></script>
</body>

</html>